{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import Splash from\"./Splash\";import moment from'moment-hijri';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[count,setCount]=useState(0);const[bgColor,setBgColor]=useState(\"#0d6efd\");const[showSplash,setShowSplash]=useState(true);const[hijriDate,setHijriDate]=useState(\"\");const[installPrompt,setInstallPrompt]=useState(null);const[canInstall,setCanInstall]=useState(false);// 1. PWA Installation Handling\nuseEffect(()=>{const handleBeforeInstallPrompt=e=>{console.log('Install prompt available');e.preventDefault();setInstallPrompt(e);setCanInstall(true);// For debugging in console\nwindow._installPrompt=e;};const checkIfInstalled=()=>{if(window.matchMedia('(display-mode: standalone)').matches){console.log('App already installed');setCanInstall(false);}};window.addEventListener('beforeinstallprompt',handleBeforeInstallPrompt);window.addEventListener('appinstalled',()=>{console.log('App successfully installed');setCanInstall(false);});checkIfInstalled();return()=>{window.removeEventListener('beforeinstallprompt',handleBeforeInstallPrompt);};},[]);const handleInstall=async()=>{if(!installPrompt)return;try{const result=await installPrompt.prompt();const{outcome}=await result.userChoice;console.log(\"User \".concat(outcome,\" the install\"));if(outcome==='accepted'){setCanInstall(false);}}catch(err){console.error('Installation failed:',err);}};// 2. Hijri Date Calculation\nuseEffect(()=>{const splashTimeout=setTimeout(()=>setShowSplash(false),3000);try{const hijriMoment=moment();setHijriDate(\"\".concat(hijriMoment.format('iD'),\" \").concat(hijriMoment.format('iMMMM'),\" \").concat(hijriMoment.format('iYYYY'),\" AH\"));}catch(error){console.error(\"Hijri date error:\",error);setHijriDate(new Date().toLocaleDateString('en-US',{day:'numeric',month:'long',year:'numeric',calendar:'islamic'}));}return()=>clearTimeout(splashTimeout);},[]);if(showSplash){return/*#__PURE__*/_jsx(Splash,{onFinish:()=>setShowSplash(false)});}return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[process.env.NODE_ENV==='development'&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'fixed',top:0,left:0,background:'#333',color:'white',padding:'5px',fontSize:'12px',zIndex:9999},children:[\"PWA Status: \",canInstall?'Ready to Install':'Not Installable']}),canInstall&&/*#__PURE__*/_jsx(\"button\",{onClick:handleInstall,style:{position:'fixed',bottom:'20px',right:'20px',padding:'12px 20px',background:'linear-gradient(135deg, #0d6efd, #0b5ed7)',color:'white',border:'none',borderRadius:'30px',fontWeight:'bold',boxShadow:'0 4px 15px rgba(13, 110, 253, 0.3)',zIndex:1000,animation:'pulse 2s infinite'},children:\"\\uD83D\\uDCF2 Install App\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"hijri-banner\",children:[\"Hijri Date: \",hijriDate]}),/*#__PURE__*/_jsxs(\"div\",{className:\"screen\",style:{backgroundColor:bgColor},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"counter-body\",style:{borderColor:bgColor},children:[/*#__PURE__*/_jsx(\"div\",{className:\"display\",children:String(count).padStart(4,\"0\")}),/*#__PURE__*/_jsx(\"div\",{className:\"buttons\",children:/*#__PURE__*/_jsx(\"button\",{className:\"icon-btn\",onClick:()=>setCount(0),title:\"Reset\",children:\"\\uD83D\\uDD04\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"main-btn\",onClick:()=>setCount(count+1),style:{\"--btn-bg\":\"#fff\",\"--btn-hover-bg\":bgColor}})]}),/*#__PURE__*/_jsxs(\"footer\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"color\",value:bgColor,onChange:e=>setBgColor(e.target.value)}),/*#__PURE__*/_jsx(\"h2\",{children:/*#__PURE__*/_jsx(\"b\",{children:\"Theme\"})})]})]})]});}export default App;","map":{"version":3,"names":["React","useEffect","useState","Splash","moment","jsx","_jsx","jsxs","_jsxs","App","count","setCount","bgColor","setBgColor","showSplash","setShowSplash","hijriDate","setHijriDate","installPrompt","setInstallPrompt","canInstall","setCanInstall","handleBeforeInstallPrompt","e","console","log","preventDefault","window","_installPrompt","checkIfInstalled","matchMedia","matches","addEventListener","removeEventListener","handleInstall","result","prompt","outcome","userChoice","concat","err","error","splashTimeout","setTimeout","hijriMoment","format","Date","toLocaleDateString","day","month","year","calendar","clearTimeout","onFinish","className","children","process","env","NODE_ENV","style","position","top","left","background","color","padding","fontSize","zIndex","onClick","bottom","right","border","borderRadius","fontWeight","boxShadow","animation","backgroundColor","borderColor","String","padStart","title","type","value","onChange","target"],"sources":["/home/awwal-dev/Documents/TECH/Web development/projects/Digital Tasbeeh/src/components/App.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Splash from \"./Splash\";\nimport moment from 'moment-hijri';\n\nfunction App() {\n  const [count, setCount] = useState(0);\n  const [bgColor, setBgColor] = useState(\"#0d6efd\");\n  const [showSplash, setShowSplash] = useState(true);\n  const [hijriDate, setHijriDate] = useState(\"\");\n  const [installPrompt, setInstallPrompt] = useState(null);\n  const [canInstall, setCanInstall] = useState(false);\n\n  // 1. PWA Installation Handling\n  useEffect(() => {\n    const handleBeforeInstallPrompt = (e) => {\n      console.log('Install prompt available');\n      e.preventDefault();\n      setInstallPrompt(e);\n      setCanInstall(true);\n      \n      // For debugging in console\n      window._installPrompt = e;\n    };\n\n    const checkIfInstalled = () => {\n      if (window.matchMedia('(display-mode: standalone)').matches) {\n        console.log('App already installed');\n        setCanInstall(false);\n      }\n    };\n\n    window.addEventListener('beforeinstallprompt', handleBeforeInstallPrompt);\n    window.addEventListener('appinstalled', () => {\n      console.log('App successfully installed');\n      setCanInstall(false);\n    });\n    checkIfInstalled();\n\n    return () => {\n      window.removeEventListener('beforeinstallprompt', handleBeforeInstallPrompt);\n    };\n  }, []);\n\n  const handleInstall = async () => {\n    if (!installPrompt) return;\n    try {\n      const result = await installPrompt.prompt();\n      const { outcome } = await result.userChoice;\n      console.log(`User ${outcome} the install`);\n      if (outcome === 'accepted') {\n        setCanInstall(false);\n      }\n    } catch (err) {\n      console.error('Installation failed:', err);\n    }\n  };\n\n  // 2. Hijri Date Calculation\n  useEffect(() => {\n    const splashTimeout = setTimeout(() => setShowSplash(false), 3000);\n    \n    try {\n      const hijriMoment = moment();\n      setHijriDate(`${hijriMoment.format('iD')} ${hijriMoment.format('iMMMM')} ${hijriMoment.format('iYYYY')} AH`);\n    } catch (error) {\n      console.error(\"Hijri date error:\", error);\n      setHijriDate(new Date().toLocaleDateString('en-US', {\n        day: 'numeric',\n        month: 'long',\n        year: 'numeric',\n        calendar: 'islamic'\n      }));\n    }\n\n    return () => clearTimeout(splashTimeout);\n  }, []);\n\n  if (showSplash) {\n    return <Splash onFinish={() => setShowSplash(false)} />;\n  }\n\n  return (\n    <div className=\"app\">\n      {/* Debug UI - can remove in production */}\n      {process.env.NODE_ENV === 'development' && (\n        <div style={{\n          position: 'fixed',\n          top: 0,\n          left: 0,\n          background: '#333',\n          color: 'white',\n          padding: '5px',\n          fontSize: '12px',\n          zIndex: 9999\n        }}>\n          PWA Status: {canInstall ? 'Ready to Install' : 'Not Installable'}\n        </div>\n      )}\n\n      {/* Install Button */}\n      {canInstall && (\n        <button\n          onClick={handleInstall}\n          style={{\n            position: 'fixed',\n            bottom: '20px',\n            right: '20px',\n            padding: '12px 20px',\n            background: 'linear-gradient(135deg, #0d6efd, #0b5ed7)',\n            color: 'white',\n            border: 'none',\n            borderRadius: '30px',\n            fontWeight: 'bold',\n            boxShadow: '0 4px 15px rgba(13, 110, 253, 0.3)',\n            zIndex: 1000,\n            animation: 'pulse 2s infinite'\n          }}\n        >\n          ðŸ“² Install App\n        </button>\n      )}\n\n      {/* Main App Content */}\n      <div className=\"hijri-banner\">Hijri Date: {hijriDate}</div>\n      \n      <div className=\"screen\" style={{ backgroundColor: bgColor }}>\n        <div className=\"counter-body\" style={{ borderColor: bgColor }}>\n          <div className=\"display\">{String(count).padStart(4, \"0\")}</div>\n\n          <div className=\"buttons\">\n            <button\n              className=\"icon-btn\"\n              onClick={() => setCount(0)}\n              title=\"Reset\"\n            >\n              ðŸ”„\n            </button>\n          </div>\n\n          <button\n            className=\"main-btn\"\n            onClick={() => setCount(count + 1)}\n            style={{\n              \"--btn-bg\": \"#fff\",\n              \"--btn-hover-bg\": bgColor\n            }}\n          ></button>\n        </div>\n\n        <footer>\n          <input\n            type=\"color\"\n            value={bgColor}\n            onChange={(e) => setBgColor(e.target.value)}\n          />\n          <h2><b>Theme</b></h2>\n        </footer>\n      </div>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}